<!DOCTYPE html>
<html>
  <head>
    <title>Piece: <%=item.pieceTi%></title>
    <link rel="stylesheet" href="/style.css">
  </head>
  <body>
  <!-- The existing definition list was wrapped in a new div with the microdata attributes itemscope and itemtype. Do we want to wrap both the item div and the form div in a div whose itemtype="http:schema.org/ItemPage"?-->
    <div id=piece itemscope itemtype="http://schema.org/CreativeWork/MusicComposition">
    <!-- We extended the CreativeWork schema to a narrower type for a music composition to allow for certain attributes that would apply to a music composition but woult not apply to a broader creative work (such as tessitura). -->
        <a rel="index" href="/"><h1>Accelerando</h1></a>
        <dl>
        <h3>Piece Information</h3>
          <dt>Title</dt>
          <dd><span class="pieceTitle" itemprop="name" itemid="<%=item.pieceID%>"><%=item.pieceTi%></span></dd>
          <dt>Associated Cycle</dt>
          <!-- TO DO: Ask Ryan about the nesting of cycle within piece. -->
          <dd><span class="cycleTitle"><%=item.CycleTi%></span></a></dd>
   <% if (item.opusNumber) { %>
          <dt>Opus Number</dt>
          <!-- "opusNumber" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="opusNumber" itemprop="opusNumber"><%=item.opusNumber%></span></dd>
    <% } %>
    <% if (item.numberWi) { %>
          <dt>Number within Opus</dt>
          <!-- "numberWiOpus" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="numberWiOpus" itemprop="numberWiOpus"><%=item.numberWi%></span></dd>
    <% } %>
    <% if (item.genre) { %>
          <dt>Genre</dt>
          <dd><span class="genre" itemprop="genre"><%=item.genre%></span></dd>
    <% } %>
          <dt>Original Language</dt>
          <dd><span class="language" itemprop="inLanguage"><%=item.orgLang%><span></dd>
    <% if (item.altLang) { %>
    	  <dt>Alternate Language</dt>
          <!-- "alternateLanguage" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="altLanguage" itemprop="alternateLanguage"><%=item.altLang%></span></dd>
    <% } %>
    <% if (item.compDateNum) { %>	 
    	  <dt>Composition Date (numeric)</dt>
          <dd><span class="compDateNum" itemprop="dateCreated"><%=item.compDateNum%></span></dd>
    <% } %>
    <% if (item.compDateText) { %>
          <dt>Composition Date (text)</dt>
          <dd><span class="compDateText" itemprop="dateCreated"><%=item.compDateText%></span></dd>
    <% } %>
   <% if (item.pieceDescription) { %>
          <dt>Piece Description</dt>
          <dd><span class="pieceDescription" itemprop="description"><%=item.pieceDescription%></span></dd>
    <% } %>
    <br/>
    <h3>Creator and Source Information</h3>
          <!-- If multiple items in a definition list are associated with a different type in schema.org than CreativeWork or a different instance of CreativeWork than a piece, wrap those list items in a div and add the itemscope and itemtype attributes. -->
          <!-- "creator/composer" extends the existing property "creator" of CreativeWork. -->
    <% if (item.comp) { %>
          <div itemprop="creator/composer" itemscope itemtype="http://schema.org/Person">
        	  <dt>Composer</dt>
              <dd><span class="composerName" itemprop="name" itemid="<%=item.compID%>"><%=item.comp%></span></dd>
        	  <dt>Composer's Nationality</dt>
              <dd><span class="composerNationality" itemprop="nationality"><%=item.compNat%></span></dd>
          </div>
    <% } %>
    <% if (item.poet) { %>
          <div itemprop="creator/poet" itemscope itemtype="http://schema.org/Person">
        	  <dt>Poet</dt>
              <dd><span class="poetName" itemprop="name" itemid="%=item.poetID%>"><%=item.poet%></span></dd>
        	  <dt>Poet's Nationality</dt>
              <dd><span class=PoetNationality itemprop="nationality"><%=item.poetNat%></span></dd>
          </div>
    <% } %>
    <% if (item.txtSrc) { %>
          <dt>Text Source</dt>
          <!-- "textSource" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="textsource" itemprop="textSource"><%=item.txtSrc%></span></dd>
    <% } %>
    <br/>
    <h3>Subject Information</h3>
    <% if (item.char) { %>
          <div itemprop="associatedCharacter" itemscope itemtype="http://schema.org/Person/Character">
          <!-- We extended the Person schema to a narrower type for a character to allow for certain attributes that would apply to a character but would not apply to an actual person (such as ageRange). -->
              <dt>Associated Character</dt>
              <dd><span class="characterName" itemprop="name"><%=item.char%></span></dd>
              <dt>Gender of Associated Character</dt>
              <dd><span class="characterGender" itemprop="gender"><%=item.charGender%></span></dd>
              <dt>Age Range of Associated Character</dt>
              <!-- "ageRange" is a property of Character, a narrower type of Person that we propose. -->
              <dd><span class="ageRange" itemprop="ageRange"><%=item.charAgeRange%></span></dd>
              <dt>Social Status of Associated Character</dt>
              <!-- "socialStatus" is a property of Character, a narrower type of Person that we propose. -->
              <dd><span class="socialStatus" itemprop="socialStatus"><%=item.charSocStat%></span></dd>
          </div>
    <% } %>
    <% if (item.subject) { %>
          <dt>Subject</dt>
          <dd><span class="subject" itemprop="about"><%=item.subject%></span></dd>
    <% } %>
    <% if (item.mood) { %>
    	  <dt>Mood</dt>
          <dd><span class="mood" itemprop="keywords"><%=item.mood%></span></dd>
    <% } %>
    <br/>
    <h3>Musical Characteristics</h3>
          <dt>Instrumentation</dt>
          <!-- "instrumentation" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="instrumentation" itemprop="instrumentation"><%=item.inst%></span></dd>
    	  <dt>Original Key</dt>
          <!-- "key" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="key" itemprop="key"><%=item.key%></span></dd>
    <% if (item.altKey) { %>
          <dt>Alternate Key</dt>
          <!-- "altKey" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="altKey" itemprop="altKey"><%item.altKey%></span></dd>
    <% } %>
    <% if (item.tempo) { %>
    	  <dt>Tempo</dt>
          <!-- "tempo" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="tempo" itemprop="tempo"><%=item.tempo%></span></dd>
    <% } %>
    <% if (item.metMark) { %>
          <dt>Metronome Marking</dt>
          <!-- "metMark" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="metronome" itemprop="metMark"><%=item.metMark%></span></dd>
    <% } %>
    	  <dt>Range</dt>
          <!-- "range" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="range" itemprop="range"><%=item.range%></span></dd>
    <% if (item.tessitura) { %>
    	  <dt>Tessitura</dt>
          <!-- "tessitura" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="tessitura" itemprop="tessitura"><%=item.tess%></span></dd>
    <% } %>
    	  <dt>Difficulty</dt>
          <!-- "difficulty" is a property of MusicComposition, a narrower type of CreativeWork that we propose. -->
          <dd><span class="difficulty" itemprop="difficulty"><%=item.diff%></span></dd> 
  <br/>
  <h3>Related Resources</h3>
          <!-- "about" in the lines below is a placeholder for now until we hear from Ryan -->
    <% if (item.imslp) { %>
          <dt><a rel="external" itemprop="about" itemscope itemtype="http://purl.org/dc/elements/1.1/relation" href="<%=item.imslp%>">IMSLP Resource</a></dt>
    <% } %>
    <% if (item.worldCat) { %>
        <dt><a rel="external" itemprop="about" itemscope itemtype="http://purl.org/dc/elements/1.1/relation" href="<%=item.worldCat%>">WorldCat Query</a></dt>
     <% } %>  
       </dl>
    </div>
<br/>
<br/>
<br/>
    <div class="admin-forms">
      <h3>Update piece</h3>
      <form id="update-piece" method="post" action="/pieces/<%=item._id%>">
        <input type="hidden" name="_method" value="put">
        <!-- The line above tells the server to treat this as a PUT request. -->
        <h4>Piece Information</h4>
        <label>Title:
          <input name="item[pieceTi]" value="<%=item.pieceTi%>" type="text" required>
        </label>
        <label>LC Identifier of Piece:
          <input name="item[pieceID]" value="<%=item.pieceID%>" type="text">
        </label>
      	<label>Associated Cycle:
          <input name="item[cycleTi]" value="<%=item.cycleTi%>" type="text" required>
        </label>
        <label>Opus Number:
          <input name="item[opusNumber]" value="<%=item.opusNumber%>" type="text">
        </label>
        <label>Number within Opus:
          <input name="item[numberWi]" value="<%=item.numberWi%>" type="number">
        </label>
        <label>Genre:
          <input name="item[genre]" value="<%=item.genre%>" type="text">
        </label>
       	<label>Original Language:
          <input name="item[orgLang]" value="<%=item.orgLang%>" type="text" required>
        </label>
		<label>Alternate Language:
          <input name="item[altLang]" value="<%=item.altLang%>" type="text">
        </label>
		<label>Composition Date (numeric):
          <input name="item[compDateNum]" value="<%=item.compDateNum%>" type="date">
        </label>
        <label>Composition Date (text):
          <input name="item[compDateText]" value="<%=item.compDateText%>" type="text" required>
        </label>
       <label>Piece Description:
          <textarea name="item[pieceDescription]"cols="50" rows="10" ><%=item.pieceDescription%></textarea>
        </label>
        <h4>Creator and Source Information</h4>
		<label>Composer:
          <input name="item[comp]" value="<%=item.comp%>" type="text">
		</label>
        <label>LC Identifier of Composer:
          <input name="item[compID]" value="<%=item.compID%>" type="text">
        </label>
		<label>Composer Nationality:
          <input name="item[compNat]" value="<%=item.compNat%>" type="text">
        </label>
		<label>Poet:
          <input name="item[poet]" value="<%=item.poet%>" type="text">
        </label>
        <label>LC Identifier of Poet:
          <input name="item[poetID]" value="<%=item.poetID%>" type="text">
        </label>
		<label>Poet Nationality:
          <input name="item[poetNat]" value="<%=item.poetNat%>" type="text">
        </label>
     	<label>Text Source:
          <input name="item[txtSrc]" value="<%=item.txtSrc%>" type="text">
        </label>
        <h4>Subject Information</h4>
       <label>Associated Character:
          <input name="item[char]" value="<%=item.char%>" type="text">
        </label>
        <label>Gender of Associated Character:
          <input name="item[charGender]" value="<%=item.charGender%>" type="text">
        </label>
        <label>Age Range of Associated Character:
          <input name="item[charAgeRange]" value="<%=item.charAgeRange%>" type="text">
        </label>
        <label>Social Status of Associated Character:
          <input name="item[charSocStat]" value="<%=item.charSocStat%>" type="text">
        </label>
        <label>Subject:
          <input name="item[title]" value="<%=item.title%>" type="text">
        </label>
    	<label>Mood:
          <input name="item[mood]" value="<%=item.mood%>" type="text">
        </label>
	    <h4>Musical Characteristics</h4>
       	<label>Instrumentation:
          <input name="item[inst]" value="<%=item.inst%>" type="text" required>
        </label>
		<label>Original Key: 
          <input name="item[key]" value="<%=item.key%>" type="text" required>
        </label>
        <label>Alternate Key:
          <input name="item[altKey]" value="<%=item.altKey%>" type="text">
        </label>
		<label>Tempo:
          <input name="item[tempo]" value="<%=item.tempo%>" type="text">
        </label>
        <label>Metronome Marking:
          <input name="item[metMark]" value="<%=item.metMark%>" type="text">
        </label>
		<label>Range:
          <input name="item[range]" value="<%=item.range%>" type="text" required>
        </label>
		<label>Tessitura:
          <input name="item[tess]" value="<%=item.tess%>" type="text">
        </label>
		<label>Difficulty:
          <input name="item[diff]" value="<%=item.diff%>" type="text">
        </label>
		<h4>Related Resources</h4>
        <label>IMSLP Resource:
          <input name="item[imslp]" value="<%=item.imslp%>" type="text">
        </label>
        <label>WorldCat Query:
          <input name="item[worldCat]" value="<%=item.worldCat%>" type="text">
        </label>
        <button>Update Piece</button>
      </form>
    </div>
  </body>
</html>